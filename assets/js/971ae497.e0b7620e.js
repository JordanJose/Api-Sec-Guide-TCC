"use strict";(self.webpackChunkapi_security_basic_guide=self.webpackChunkapi_security_basic_guide||[]).push([[4954],{3905:(e,a,r)=>{r.d(a,{Zo:()=>u,kt:()=>m});var t=r(7294);function s(e,a,r){return a in e?Object.defineProperty(e,a,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[a]=r,e}function o(e,a){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);a&&(t=t.filter((function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable}))),r.push.apply(r,t)}return r}function i(e){for(var a=1;a<arguments.length;a++){var r=null!=arguments[a]?arguments[a]:{};a%2?o(Object(r),!0).forEach((function(a){s(e,a,r[a])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))}))}return e}function n(e,a){if(null==e)return{};var r,t,s=function(e,a){if(null==e)return{};var r,t,s={},o=Object.keys(e);for(t=0;t<o.length;t++)r=o[t],a.indexOf(r)>=0||(s[r]=e[r]);return s}(e,a);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(t=0;t<o.length;t++)r=o[t],a.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}var l=t.createContext({}),d=function(e){var a=t.useContext(l),r=a;return e&&(r="function"==typeof e?e(a):i(i({},a),e)),r},u=function(e){var a=d(e.components);return t.createElement(l.Provider,{value:a},e.children)},p={inlineCode:"code",wrapper:function(e){var a=e.children;return t.createElement(t.Fragment,{},a)}},c=t.forwardRef((function(e,a){var r=e.components,s=e.mdxType,o=e.originalType,l=e.parentName,u=n(e,["components","mdxType","originalType","parentName"]),c=d(r),m=s,f=c["".concat(l,".").concat(m)]||c[m]||p[m]||o;return r?t.createElement(f,i(i({ref:a},u),{},{components:r})):t.createElement(f,i({ref:a},u))}));function m(e,a){var r=arguments,s=a&&a.mdxType;if("string"==typeof e||s){var o=r.length,i=new Array(o);i[0]=c;var n={};for(var l in a)hasOwnProperty.call(a,l)&&(n[l]=a[l]);n.originalType=e,n.mdxType="string"==typeof e?e:s,i[1]=n;for(var d=2;d<o;d++)i[d]=r[d];return t.createElement.apply(null,i)}return t.createElement.apply(null,r)}c.displayName="MDXCreateElement"},8771:(e,a,r)=>{r.r(a),r.d(a,{assets:()=>l,contentTitle:()=>i,default:()=>p,frontMatter:()=>o,metadata:()=>n,toc:()=>d});var t=r(7462),s=(r(7294),r(3905));const o={sidebar_position:2},i="Explora\xe7\xe3o",n={unversionedId:"Vulnerabilidades/Lack_of_Resources_and_Rate_Limiting/exploracao",id:"Vulnerabilidades/Lack_of_Resources_and_Rate_Limiting/exploracao",title:"Explora\xe7\xe3o",description:"---",source:"@site/docs/Vulnerabilidades/7_Lack_of_Resources_and_Rate_Limiting/exploracao.md",sourceDirName:"Vulnerabilidades/7_Lack_of_Resources_and_Rate_Limiting",slug:"/Vulnerabilidades/Lack_of_Resources_and_Rate_Limiting/exploracao",permalink:"/Api-Sec-Guide-TCC/docs/Vulnerabilidades/Lack_of_Resources_and_Rate_Limiting/exploracao",draft:!1,tags:[],version:"current",sidebarPosition:2,frontMatter:{sidebar_position:2},sidebar:"defaultSidebar",previous:{title:"Descri\xe7\xe3o",permalink:"/Api-Sec-Guide-TCC/docs/Vulnerabilidades/Lack_of_Resources_and_Rate_Limiting/descricao"},next:{title:"Corre\xe7\xe3o",permalink:"/Api-Sec-Guide-TCC/docs/Vulnerabilidades/Lack_of_Resources_and_Rate_Limiting/correcao"}},l={},d=[{value:"Rate limit da rota de login",id:"rate-limit-da-rota-de-login",level:2},{value:"Analisando os resultados das requisi\xe7\xf5es",id:"analisando-os-resultados-das-requisi\xe7\xf5es",level:3},{value:"Mais refer\xeancias dispon\xedveis na OWASP.",id:"mais-refer\xeancias-dispon\xedveis-na-owasp",level:4}],u={toc:d};function p(e){let{components:a,...o}=e;return(0,s.kt)("wrapper",(0,t.Z)({},u,o,{components:a,mdxType:"MDXLayout"}),(0,s.kt)("h1",{id:"explora\xe7\xe3o"},"Explora\xe7\xe3o"),(0,s.kt)("hr",null),(0,s.kt)("p",null,"Tendo em mente os questionamentos levantados ao final da sess\xe3o anterior, \xe9 poss\xedvel realizar os testes de seguran\xe7a a fim de descobrir onde a vulnerabilidade pode ser explorada."),(0,s.kt)("p",null,"Esse tipo de vulnerabilidade possui muitas maneiras de ser explorada, algumas s\xe3o complexas e envolvem protocolos de redes, por\xe9m, tamb\xe9m \xe9 interessante realizar testes de ",(0,s.kt)("a",{parentName:"p",href:"https://www.devmedia.com.br/testes-de-desempenho-carga-e-stress/26546"},"desempenho, carga e stress"),", para saber se a aplica\xe7\xe3o foi devidamente dimensionada."),(0,s.kt)("p",null,"Pegando o gancho da vulnerabilidade anterior, a enumera\xe7\xe3o de usu\xe1rios e senhas, \xe9 interessante fazer o teste de limita\xe7\xe3o de requisi\xe7\xf5es na rota de login, al\xe9m de evitar um ataque DoS/DDoS, evitaria que a enumera\xe7\xe3o foi feita com facilidade."),(0,s.kt)("h2",{id:"rate-limit-da-rota-de-login"},"Rate limit da rota de login"),(0,s.kt)("p",null,"Para que um usu\xe1rio fa\xe7a login, \xe9 necess\xe1rio que o mesmo se autentique na aplica\xe7\xe3o, para isso basta utilizar a rota ",(0,s.kt)("inlineCode",{parentName:"p"},"/users/v1/login")," usando uma requisi\xe7\xe3o do tipo ",(0,s.kt)("inlineCode",{parentName:"p"},"POST")," enviando as informa\xe7\xf5es de login no body da requisi\xe7\xe3o."),(0,s.kt)("p",null,"Dessa vez a inten\xe7\xe3o n\xe3o \xe9 realizar o login, \xe9 apenas testar se h\xe1 algum tipo de limitador de requisi\xe7\xf5es em um curto espa\xe7o de tempo."),(0,s.kt)("p",null,"Para isso, n\xe3o \xe9 necess\xe1rio desenvolver nenhum script (o que seria interessante), o pr\xf3prio Burp Suite possui algumas ferramentas para fazer esse tipo de teste."),(0,s.kt)("p",null,"Como a inten\xe7\xe3o \xe9 apenas realizar requisi\xe7\xf5es, a ferramenta do Burp chamada ",(0,s.kt)("strong",{parentName:"p"},"sequencer")," pode ajudar nisso."),(0,s.kt)("p",null,"A inten\xe7\xe3o dessa ferramenta \xe9 analisar responses a fim de encontrar formas de prever strings, como tokens e rotas, por\xe9m, ser\xe1 utilizada apenas para checar se todas as requsi\xe7\xf5es enviadas foram bem sucedidas."),(0,s.kt)("p",null,"Os passos s\xe3o simples:"),(0,s.kt)("p",null,(0,s.kt)("em",{parentName:"p"},"1 - Selecione a requisi\xe7\xe3o que deseja repetir na aba ",(0,s.kt)("strong",{parentName:"em"},"target")," do Burp Suite"),"\n",(0,s.kt)("img",{alt:"Passo 1 Burp",src:r(4271).Z,width:"1387",height:"355"})),(0,s.kt)("p",null,(0,s.kt)("em",{parentName:"p"},"2 - Envie a requisi\xe7\xe3o para o ",(0,s.kt)("strong",{parentName:"em"},"sequencer")," "),"\n",(0,s.kt)("img",{alt:"Passo 2 Burp",src:r(1463).Z,width:"1471",height:"792"})),(0,s.kt)("p",null,(0,s.kt)("em",{parentName:"p"},"3 - Com a requisi\xe7\xe3o no sequencer, basta clicar em ",(0,s.kt)("strong",{parentName:"em"},"start live capture")," que uma nova janela com o teste em execu\xe7\xe3o ir\xe1 se abrir "),"\n",(0,s.kt)("img",{alt:"Passo 3 Burp",src:r(4937).Z,width:"1173",height:"447"})),(0,s.kt)("p",null,(0,s.kt)("em",{parentName:"p"},"4 - Basta aguardar os testes encerrarem para analisar os resultados, para esse teste \xe9 interessante apenas os n\xfameros de requisi\xe7\xf5es e erros"),"\n",(0,s.kt)("img",{alt:"Passo 4 Burp",src:r(3913).Z,width:"903",height:"165"})),(0,s.kt)("h3",{id:"analisando-os-resultados-das-requisi\xe7\xf5es"},"Analisando os resultados das requisi\xe7\xf5es"),(0,s.kt)("p",null,"Ao analisar os n\xfameros informados pelo Burp Suite e pelos logs da aplica\xe7\xe3o \xe9 poss\xedvel perceber que foram realizadas ",(0,s.kt)("strong",{parentName:"p"},"20 mil requisi\xe7\xf5es")," em um espa\xe7o de tempo de aproximadamente ",(0,s.kt)("strong",{parentName:"p"},"5 minutos"),", todas com ",(0,s.kt)("strong",{parentName:"p"},"sucesso"),"."),(0,s.kt)("p",null,"Um usu\xe1rio comum n\xe3o conseguiria realizar essa quantidade absurda de tentativas de login em t\xe3o pouco tempo, por\xe9m, a aplica\xe7\xe3o permite que isso seja feito."),(0,s.kt)("p",null,"Ou seja, a aplica\xe7\xe3o est\xe1 suscet\xedvel a tentativas de DoS/DDoS, al\xe9m de outros tipos de vulnerabilidades que a falta de limita\xe7\xe3o de requisi\xe7\xf5es est\xe1 atrelada, como a enumera\xe7\xe3o de usu\xe1rios e senhas."),(0,s.kt)("h4",{id:"mais-refer\xeancias-dispon\xedveis-na-owasp"},"Mais refer\xeancias dispon\xedveis na ",(0,s.kt)("a",{parentName:"h4",href:"https://github.com/OWASP/API-Security/blob/master/2019/en/src/0xa4-lack-of-resources-and-rate-limiting.md"},"OWASP"),"."))}p.isMDXComponent=!0},4271:(e,a,r)=>{r.d(a,{Z:()=>t});const t=r.p+"assets/images/Burp_1-9cfd6d1e9edb66d6d0124202f3b3905b.png"},1463:(e,a,r)=>{r.d(a,{Z:()=>t});const t=r.p+"assets/images/Burp_2-f751d3b19343628ed52d6d24db87ef2f.png"},4937:(e,a,r)=>{r.d(a,{Z:()=>t});const t=r.p+"assets/images/Burp_3-5ffff28f273a3d3a8b292dc4828cc338.png"},3913:(e,a,r)=>{r.d(a,{Z:()=>t});const t=r.p+"assets/images/Burp_4-933ab432b4a53e38aa34ee7c33b8e29f.png"}}]);